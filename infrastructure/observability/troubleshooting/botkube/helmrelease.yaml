apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: botkube
  namespace: botkube
spec:
  interval: 5m
  chart:
    spec:
      chart: botkube
      version: 1.14.0
      sourceRef:
        kind: HelmRepository
        name: botkube
        namespace: flux-system
  values:
  # https://artifacthub.io/packages/helm/infracloudio/botkube
  # https://github.com/kubeshop/botkube/blob/main/helm/botkube/values.yaml
    settings:
      clusterName: pikakube
    communications:
      'default-group':
        socketSlack:
          enabled: true
          channels:
            'default':
              name: 'SLACK_CHANNEL'
          botToken: ''
          appToken: ''
    executors:
      k8s-default-tools:
        botkube/kubectl:
          enabled: true
      flux:
        botkubeExtra/flux:
          displayName: "Flux"
          enabled: true
          context:
            rbac:
              group:
                type: Static
                static:
                  values: ["flux"]
          config:
            # See the Configuration section for config properties.
            github: # Optional GitHub support
              auth:
                accessToken: "" # your GitHub access token. Read more: https://help.github.com/articles/creating-a-personal-access-token-for-the-command-line/#creating-a-token
    plugins:
      repositories:
        botkubeExtra:
          url: https://github.com/kubeshop/botkube-plugins/releases/download/v1.14.0/plugins-index.yaml