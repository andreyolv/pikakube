apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: holmesgpt
  namespace: holmesgpt
spec:
  interval: 5m
  chart:
    spec:
      chart: holmes
      version: 0.7.2
      sourceRef:
        kind: HelmRepository
        name: robusta
        namespace: flux-system
  values:
  # https://artifacthub.io/packages/helm/robusta/holmes
  # https://github.com/robusta-dev/holmesgpt/blob/master/helm/holmes/values.yaml
    additionalEnvVars:
    - name: MODEL
      value: gpt-4o
    - name: OPENAI_API_KEY
      valueFrom:
        secretKeyRef:
          name: holmes-secret
          key: openAiKey