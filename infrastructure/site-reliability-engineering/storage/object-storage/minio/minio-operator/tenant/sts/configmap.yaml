apiVersion: v1
kind: ConfigMap
metadata:
  name: start-config-script
  namespace: minio-tenant
data:
  setup.sh: |
    #!/bin/bash
    mc mb myminio/test-bucket -p && \
    mc mb myminio/other-bucket -p && \
    mc admin policy create myminio test-bucket-rw /start-config/bucket-policy.json
  bucket-policy.json: |
    {
      "Version": "2012-10-17",
      "Statement": [
        {
          "Effect": "Allow",
          "Action": [
            "s3:*"
          ],
          "Resource": [
            "arn:aws:s3:::test-bucket",
            "arn:aws:s3:::test-bucket/*"
          ]
        }
      ]
    }
